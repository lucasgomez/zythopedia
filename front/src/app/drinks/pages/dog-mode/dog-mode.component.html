<ng-container *ngIf="drinks$ | async as drinks else loading">
    <div class="p-fluid">
        <form [formGroup]="loginForm" class="p-grid">
            <div class="p-field p-col-12 p-md-6">
                <label for="username">Username</label>
                <input id="username" type="text" formControlName="username" class="p-inputtext">
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label for="password">Password</label>
                <input id="password" type="password" formControlName="password" class="p-inputtext">
            </div>
        </form>
    </div>

    <p-table [value]="drinks.content" responsiveLayout="stack" class="p-datatable p-datatable-striped">
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="name">
                    Nom
                    <p-sortIcon field="name"></p-sortIcon>
                </th>
                <th>
                    Producteur
                </th>
                <th>
                    Location
                </th>
                <th>
                    Dispo.
                </th>
                <th>
                    Actions
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-drink>
            <tr>
                <td>{{ drink.name }}</td>
                <td>{{ drink.producerName }}</td>
                <td>{{ drink.location || 'N/A' }}</td>
                <td><availability-badge
                        [availability]="drink.availability"
                        [showAvailabilityMenu]="true"
                        (clickToChangeAvailability)="handleAvailabilityChange(drink, $event)"
                ></availability-badge></td>
                <td>
                    <p-button icon="pi pi-pencil" [routerLink]="['/', 'drinks', 'drink-edition', drink.id]" label="Edit" class="p-button-sm"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>

    <p-dialog header="Modifier emplacement" [modal]="true" [(visible)]="editDrinkPopupVisible" [closable]="true" [style]="{width: '400px'}">
        <div>A completer</div>
    </p-dialog>
</ng-container>
<ng-template #loading>
    <p>Chargement en cours...</p>
</ng-template>